{"version":3,"file":"crossfilter-ma.min.js","sources":["crossfilter-ma.js"],"names":["_crossfilterMA","crossfilter","crossfilterMA","version","constants","DEFAULT_MOVING_AVERAGE_NODES","accumulateGroupForNDayMovingAverage","sourceGroup","ndays","rolldownMode","debugMode","all","Error","_keyAccessor","_valueAccessor","_","rolldown","_debug","_defaultKeyAccessor","d","key","_defaultValueAccessor","value","keyAccessor","this","valueAccessor","_this","cumulate","fullDates","myDx","myDimensionDate","dimension","myGroupingOnDate","group","reducer","reduce","p","v","selDate","selValue","myValue","quantity","orderedDates","Object","keys","sort","accumulatedAll","map","thisDayIndex","indexOf","days","numsToAverage","thisCumulate","thisAverage","datumsUsed","targetDayId","targetDayBlock","targetDayValue","push","returnObj","rollingAverage","top","apply","arguments","accumulateGroupForPercentageChange","i","arr","prevDayValue","thisDay","perc","prevDayId","prevDayBlock","diff","prop","percentageChange","thisDayKey","thisDayValue","prevDayKey","define","amd","module","exports","_crossfilter","require","crossfilter$ma"],"mappings":"CAkBA,WAAc,QAASA,GAAeC,GAClC,YASJ,IAAIC,KAEJA,GAAcC,QAAU,YAExBD,EAAcE,WACVC,6BAA8B,EAGlC,IAAIH,GAAgBA,KAgBpBA,GAAcI,oCAAsC,SAAUC,EAAaC,EAAOC,EAAcC,GAC5F,IAAMH,IAAgBA,EAAYI,KAAkC,kBAApBJ,GAAYI,IACxD,KAAM,IAAIC,OAAO,wCAIrBJ,GAA2B,mBAAVA,GAA0BA,EAAQN,EAAcE,UAAUC,6BAC3EK,EAAmC,mBAAdA,KAAgCA,GAAY,EACjED,EAAyC,mBAAjBA,KAAmCA,GAAe,CAE1E,IAAII,GACAC,CAEJ,QAQIN,MAAO,SAAUO,GACb,MAAkB,mBAANA,GACDP,OAEXA,EAAQO,IAUZC,SAAU,SAAUD,GAChB,MAAkB,mBAANA,GACDN,OAEXA,IAAiBM,IAUrBE,OAAQ,SAAUF,GACd,MAAkB,mBAANA,GACDL,OAEXA,IAAcK,IAGlBG,oBAAqB,WACjB,MAAO,UAAUC,GACb,MAAOA,GAAEC,MAGjBC,sBAAuB,WACnB,MAAO,UAAUF,GACb,MAAOA,GAAEG,QAKjBC,YAAa,SAAUR,GACnB,MAAkB,mBAANA,IACqB,mBAAjBF,KACRA,EAAeW,KAAKN,uBAEjBL,QAEXA,EAAeE,IAGnBU,cAAe,SAAUV,GACrB,MAAkB,mBAANA,IACuB,mBAAnBD,KACRA,EAAiBU,KAAKH,yBAEnBP,QAEXA,EAAiBC,IAIrBJ,IAAK,WACD,GAAIe,GAAQF,KACRG,EAAW,EACXhB,EAAMJ,EAAYI,MAClBiB,KAEAC,EAAO5B,EAAaU,GACpBmB,EAAkBD,EAAKE,UAAW,SAAUZ,GAC5C,MAAOA,GAAEC,MAETY,EAAmBF,EAAgBG,QAEnCC,EAAUF,EAAiBG,OAC3B,SAAWC,EAAGC,GACV,GAAIC,GAAUZ,EAAMH,cAAec,GAC/BE,EAAWb,EAAMD,gBAAiBY,EAStC,OAPKT,GAAWU,GACZV,EAAWU,GAAUE,SAAWD,EAEhCX,EAAWU,IACPE,QAASD,GAGVH,GAEX,SAAWA,EAAGC,GACV,GAAIC,GAAUZ,EAAMH,cAAec,GAC/BE,EAAWb,EAAMD,gBAAiBY,EAOtC,OALKT,GAAWU,GACZV,EAAWU,GAAUG,UAAYF,QAE1BX,GAAWU,GAEfF,GAEX,WACIR,MAIRM,GAAQvB,KACR,IAAI+B,GAAeC,OAAOC,KAAMhB,GAAYiB,OAExCC,EAAiBnC,EAAIoC,IAAK,SAAU5B,GAapC,IAXA,GAAI6B,GAAeN,EAAaO,QAASvB,EAAMH,cAAeJ,IAE1D+B,EAAO1C,EAEP2C,EAAgB,EAChBC,EAAe,EACfC,EAAc,EAEdC,OAGMJ,EAAO,GAAI,CAEjB,GAAIK,GAAcb,EAAcM,EAAeE,EAE/C,KAAMK,IAAgB9C,EAClB,KAGJ,IAAK8C,EAAc,CACf,GAAIC,GAAiB5B,EAAW2B,GAC5BE,EAAiBD,EAAehB,OAEpCW,KACAC,GAAgBK,EACX/C,GACD4C,EAAWI,MAAQtC,IAAOmC,EAAajC,MAASmC,KAM5DN,IACAC,GAAgBjC,EAAEG,MAEbZ,IACDiB,GAAYR,EAAEG,MACdgC,EAAWI,MAAQtC,IAAOD,EAAEC,IAAKE,MAASH,EAAEG,SAGhD+B,EAAcD,EAAeD,EAER3C,EAAhB2C,IAA0B1C,IAC3B4C,EAAc,EAGlB,IAAIM,IACAvC,IAAgBD,EAAEC,IAClBE,MAAgBH,EAAEG,MAClBsC,eAAgBP,EAUpB,OAPK3C,KACDiD,EAAU1C,QACNU,SAAYA,EACZ2B,WAAYA,IAIbK,GAGX,OAAOb,IAGXe,IAAK,WACD,GAAInC,GAAQF,KACRG,EAAW,EACXhB,EAAMJ,EAAYsD,IAAIC,MAAOvD,EAAawD,WAC1CnC,KAEAC,EAAO5B,EAAaU,GACpBmB,EAAkBD,EAAKE,UAAW,SAAUZ,GAC5C,MAAOA,GAAEC,MAETY,EAAmBF,EAAgBG,QAEnCC,EAAUF,EAAiBG,OAC3B,SAAWC,EAAGC,GACV,GAAIC,GAAUZ,EAAMH,cAAec,GAC/BE,EAAWb,EAAMD,gBAAiBY,EAStC,OAPKT,GAAWU,GACZV,EAAWU,GAAUE,SAAWD,EAEhCX,EAAWU,IACPE,QAASD,GAGVH,GAEX,SAAWA,EAAGC,GACV,GAAIC,GAAUZ,EAAMH,cAAec,GAC/BE,EAAWb,EAAMD,gBAAiBY,EAOtC,OALKT,GAAWU,GACZV,EAAWU,GAAUG,UAAYF,QAE1BX,GAAWU,GAEfF,GAEX,WACIR,MAIRM,GAAQvB,KACR,IAAI+B,GAAeC,OAAOC,KAAMhB,GAAYiB,OAExCC,EAAiBnC,EAAIoC,IAAK,SAAU5B,GAapC,IAXA,GAAI6B,GAAeN,EAAaO,QAASvB,EAAMH,cAAeJ,IAE1D+B,EAAO1C,EAEP2C,EAAgB,EAChBC,EAAe,EACfC,EAAc,EAEdC,OAGMJ,EAAO,GAAI,CAEjB,GAAIK,GAAcb,EAAcM,EAAeE,EAE/C,KAAMK,IAAgB9C,EAClB,KAGJ,IAAK8C,EAAc,CACf,GAAIC,GAAiB5B,EAAW2B,GAC5BE,EAAiBD,EAAehB,OAEpCW,KACAC,GAAgBK,EAEX/C,GACD4C,EAAWI,MAAQtC,IAAOmC,EAAajC,MAASmC,KAK5DN,IACAC,GAAgBjC,EAAEG,MAEbZ,IACDiB,GAAYR,EAAEG,MACdgC,EAAWI,MAAQtC,IAAOD,EAAEC,IAAKE,MAASH,EAAEG,SAGhD+B,EAAcD,EAAeD,EAER3C,EAAhB2C,IAA0B1C,IAC3B4C,EAAc,EAGlB,IAAIM,IACAvC,IAAKD,EAAEC,IACPE,MAAOH,EAAEG,MACTsC,eAAgBP,EAUpB,OAPK3C,KACDiD,EAAU1C,QACNU,SAAYA,EACZ2B,WAAYA,IAIbK,GAGX,OAAOb,KAMnB,IAAI5C,GAAgBA,KAsQZ,OAxPRA,GAAc8D,mCAAqC,SAAUzD,EAAaG,GACtE,IAAMH,IAAgBA,EAAYI,KAAkC,kBAApBJ,GAAYI,IACxD,KAAM,IAAIC,OAAO,wCAIrBF,GAAmC,mBAAdA,KAAgCA,GAAY,CAEjE,IAAIG,GACAC,CAEJ,QASIG,OAAQ,SAAUF,GACd,MAAkB,mBAANA,GACDL,OAEXA,IAAcK,IAGlBG,oBAAqB,WACjB,MAAO,UAAUC,GACb,MAAOA,GAAEC,MAGjBC,sBAAuB,WACnB,MAAO,UAAUF,GACb,MAAOA,GAAEG,QAKjBC,YAAa,SAAUR,GACnB,MAAkB,mBAANA,IACqB,mBAAjBF,KACRA,EAAeW,KAAKN,uBAEjBL,QAEXA,EAAeE,IAGnBU,cAAe,SAAUV,GACrB,MAAkB,mBAANA,IACuB,mBAAnBD,KACRA,EAAiBU,KAAKH,yBAEnBP,QAEXA,EAAiBC,IAIrBJ,IAAK,WACD,GAAIe,GAAQF,KACRb,EAAMJ,EAAYI,MAClBiB,KAEAC,EAAO5B,EAAaU,GACpBmB,EAAkBD,EAAKE,UAAW,SAAUZ,GAC5C,MAAOA,GAAEC,MAETY,EAAmBF,EAAgBG,QAEnCC,EAAUF,EAAiBG,OAC3B,SAAWC,EAAGC,GACV,GAAIC,GAAUZ,EAAMH,cAAec,GAC/BE,EAAWb,EAAMD,gBAAiBY,EAStC,OAPKT,GAAWU,GACZV,EAAWU,GAAUE,SAAWD,EAEhCX,EAAWU,IACPE,QAASD,GAGVH,GAEX,SAAWA,EAAGC,GACV,GAAIC,GAAUZ,EAAMH,cAAec,GAC/BE,EAAWb,EAAMD,gBAAiBY,EAOtC,OALKT,GAAWU,GACZV,EAAWU,GAAUG,UAAYF,QAE1BX,GAAWU,GAEfF,GAEX,WACIR,MAIRM,GAAQvB,KACR,IAAI+B,GAAeC,OAAOC,KAAMhB,GAAYiB,OAExCC,EAAiBnC,EAAIoC,IAAK,SAAU5B,EAAG8C,EAAGC,GAE1C,CAAA,GAKIC,GALAC,EAAUjD,EACVkD,EAAO,EAEPrB,EAAeN,EAAaO,QAASvB,EAAMH,cAAeJ,IAC1DmD,EAAY5B,EAAcM,EAAe,EAG/BkB,GAAID,EAAI,GAEtB,GAAKK,EAAY,CACb,GAAIC,GAAe3C,EAAW0C,EAC9BH,GAAeI,EAAa/B,OAE5B,IAAIgC,GAAO9C,EAAMD,gBAAiB2C,GAAYD,CAE9C,IAAc,IAATK,EAAa,CACd,GAAIC,GAAOD,EAAOL,CAClBE,GAAc,IAAPI,MAEPJ,GAAO,EAIf,GAAIV,IACAvC,IAAKD,EAAEC,IACPE,MAAOH,EAAEG,MACToD,iBAAkBL,EAYtB,OATK3D,KACDiD,EAAU1C,QACN0D,WAAcP,EAAQhD,IACtBwD,aAAgBR,EAAQ9C,MACxBuD,WAAcP,EAAYA,EAAY,OACtCH,aAAgBA,EAAeA,EAAe,SAI/CR,GAGX,OAAOb,IAGXe,IAAK,WAED,GAAInC,GAAQF,KACRb,EAAMJ,EAAYsD,IAAIC,MAAOvD,EAAawD,WAC1CnC,KAEAC,EAAO5B,EAAaU,GACpBmB,EAAkBD,EAAKE,UAAW,SAAUZ,GAC5C,MAAOA,GAAEC,MAETY,EAAmBF,EAAgBG,QAEnCC,EAAUF,EAAiBG,OAC3B,SAAWC,EAAGC,GACV,GAAIC,GAAUZ,EAAMH,cAAec,GAC/BE,EAAWb,EAAMD,gBAAiBY,EAStC,OAPKT,GAAWU,GACZV,EAAWU,GAAUE,SAAWD,EAEhCX,EAAWU,IACPE,QAASD,GAGVH,GAEX,SAAWA,EAAGC,GACV,GAAIC,GAAUZ,EAAMH,cAAec,GAC/BE,EAAWb,EAAMD,gBAAiBY,EAOtC,OALKT,GAAWU,GACZV,EAAWU,GAAUG,UAAYF,QAE1BX,GAAWU,GAEfF,GAEX,WACIR,MAIRM,GAAQvB,KACR,IAAI+B,GAAeC,OAAOC,KAAMhB,GAAYiB,OAExCC,EAAiBnC,EAAIoC,IAAK,SAAU5B,GAEpC,GAKIgD,GALAC,EAAUjD,EACVkD,EAAO,EAEPrB,EAAeN,EAAaO,QAASvB,EAAMH,cAAeJ,IAC1DmD,EAAY5B,EAAcM,EAAe,EAG7C,IAAKsB,EAAY,CACb,GAAIC,GAAe3C,EAAW0C,EAC9BH,GAAeI,EAAa/B,OAE5B,IAAIgC,GAAO9C,EAAMD,gBAAiB2C,GAAYD,CAE9C,IAAc,IAATK,EAAa,CACd,GAAIC,GAAOD,EAAOL,CAClBE,GAAc,IAAPI,MAEPJ,GAAO,EAIf,GAAIV,IACAvC,IAAKD,EAAEC,IACPE,MAAOH,EAAEG,MACToD,iBAAkBL,EAYtB,OATK3D,KACDiD,EAAU1C,QACN0D,WAAcP,EAAQhD,IACtBwD,aAAgBR,EAAQ9C,MACxBuD,WAAcP,EAAYA,EAAY,OACtCH,aAAgBG,EAAYH,EAAe,SAI5CR,GAGX,OAAOb,MAUX5C,EAAcD,YAAcA,EAErBC,EACP,GAAqB,kBAAX4E,SAAyBA,OAAOC,IACtCD,QAAQ,eAAgB9E,OACrB,IAAqB,gBAAXgF,SAAuBA,OAAOC,QAAS,CACpD,GAAIC,GAAeC,QAAQ,cAMC,mBAAjBD,KACPA,EAAeA,EAAajF,aAEhC+E,OAAOC,QAAUjF,EAAekF,OAEhC1D,MAAK,kBAAoBxB,EAAeC,aACxCuB,KAAK4D,eAAiB5D,KAAK"}