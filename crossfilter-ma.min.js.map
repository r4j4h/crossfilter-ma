{"version":3,"file":"crossfilter-ma.min.js","sources":["crossfilter-ma.js"],"names":["_crossfilterMA","crossfilter","_potentiallyOrderByRollingAverage","orderingByRollingAverage","results","sort","a","b","rollingAverage","_potentiallyOrderByPercentageChange","orderingByPercentageChange","percentageChange","crossfilterMA","version","constants","DEFAULT_MOVING_AVERAGE_NODES","accumulateGroupForNDayMovingAverage","sourceGroup","ndays","rolldownMode","debugMode","all","Error","_keyAccessor","_valueAccessor","_","rolldown","_debug","_defaultKeyAccessor","d","key","_defaultValueAccessor","value","keyAccessor","this","valueAccessor","orderByMovingAverage","_this","cumulate","fullDates","forEach","orderedDates","Object","keys","accumulatedAll","map","thisDayKey","thisDayValue","thisDayIndex","indexOf","days","numsToAverage","thisCumulate","thisAverage","datumsUsed","targetDayId","targetDayBlock","targetDayValue","push","returnObj","top","apply","arguments","accumulateGroupForPercentageChange","orderByPercentageChange","prevDayValue","thisDay","perc","prevDayId","prevDayBlock","diff","prop","prevDayKey","define","amd","module","exports","_crossfilter","require","crossfilter$ma"],"mappings":"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"}