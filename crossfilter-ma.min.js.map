{"version":3,"file":"crossfilter-ma.min.js","sources":["crossfilter-ma.js"],"names":["_crossfilterMA","crossfilter","crossfilterMA","version","constants","DEFAULT_MOVING_AVERAGE_NODES","accumulateGroupForNDayMovingAverage","sourceGroup","ndays","rolldownMode","debugMode","all","Error","_keyAccessor","_valueAccessor","_","rolldown","_debug","_defaultKeyAccessor","d","key","_defaultValueAccessor","value","keyAccessor","this","valueAccessor","_this","cumulate","fullDates","myDx","myDimensionDate","dimension","myGroupingOnDate","group","reducer","reduce","p","v","selDate","selValue","myValue","quantity","orderedDates","Object","keys","sort","accumulatedAll","map","thisDayKey","thisDayValue","thisDayIndex","indexOf","days","numsToAverage","thisCumulate","thisAverage","datumsUsed","targetDayId","targetDayBlock","targetDayValue","push","returnObj","rollingAverage","top","apply","arguments","accumulateGroupForPercentageChange","prevDayValue","thisDay","perc","prevDayId","prevDayBlock","diff","prop","percentageChange","prevDayKey","define","amd","module","exports","_crossfilter","require","crossfilter$ma"],"mappings":"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"}