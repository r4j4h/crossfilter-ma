{"version":3,"file":"crossfilter-ma.min.js","sources":["crossfilter-ma.js"],"names":["_crossfilterMA","crossfilter","_potentiallyOrderByRollingAverage","orderingByRollingAverage","results","sort","a","b","rollingAverage","_prepareComparisonValueHashMap","datums","keyAccessor","valueAccessor","fullDates","forEach","thisDay","orderedDates","Object","keys","datesHash","_calculatePercentageChange","oldValue","newValue","perc","diff","NaN","prop","_potentiallyOrderByPercentageChange","orderingByPercentageChange","isNaN","percentageChange","_convertKeyedSetToArray","keyedSet","map","d","_potentiallyOrderIterationAccessorResultsByPercentageChange","crossfilterMA","version","constants","DEFAULT_MOVING_AVERAGE_NODES","accumulateGroupForNDayMovingAverage","sourceGroup","ndays","rolldownMode","debugMode","all","Error","_keyAccessor","_valueAccessor","_","rolldown","_debug","_defaultKeyAccessor","key","_defaultValueAccessor","value","this","orderByMovingAverage","_this","cumulate","accumulatedAll","thisDayKey","thisDayValue","thisDayIndex","indexOf","days","numsToAverage","thisCumulate","thisAverage","datumsUsed","targetDayId","targetDayBlock","targetDayValue","push","returnObj","top","apply","arguments","accumulateGroupForPercentageChange","_calculationAccessor","_iterationAccessor","orderingOnlyNestedValuesByPercentageChange","_defaultCalculationAccessor","_defaultIterationAccessor","calculationAccessor","iterationAccessor","orderByPercentageChange","orderOnlyNestedValuesByPercentageChange","hmm","thisDayId","thisDayCalculatedValue","thisDayIterator","undefined","prevDayIndex","prevDayId","prevDayValue","prevDayCalculatedValue","prevDayIterator","i","curVal","prevVal","prevKey","prevValue","sorted","prevDayKey","define","amd","module","exports","_crossfilter","require","crossfilter$ma"],"mappings":"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"}