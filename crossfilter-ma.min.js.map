{"version":3,"file":"crossfilter-ma.min.js","sources":["crossfilter-ma.js"],"names":["_crossfilterMA","crossfilter","_potentiallyOrderByRollingAverage","orderingByRollingAverage","results","sort","a","b","rollingAverage","_potentiallyOrderByPercentageChange","orderingByPercentageChange","percentageChange","crossfilterMA","version","constants","DEFAULT_MOVING_AVERAGE_NODES","accumulateGroupForNDayMovingAverage","sourceGroup","ndays","rolldownMode","debugMode","all","Error","_keyAccessor","_valueAccessor","_","rolldown","_debug","_defaultKeyAccessor","d","key","_defaultValueAccessor","value","keyAccessor","this","valueAccessor","orderByMovingAverage","_this","cumulate","fullDates","myDx","myDimensionDate","dimension","myGroupingOnDate","group","reducer","reduce","p","v","selDate","selValue","myValue","quantity","orderedDates","Object","keys","accumulatedAll","map","thisDayKey","thisDayValue","thisDayIndex","indexOf","days","numsToAverage","thisCumulate","thisAverage","datumsUsed","targetDayId","targetDayBlock","targetDayValue","push","returnObj","top","apply","arguments","accumulateGroupForPercentageChange","orderByPercentageChange","prevDayValue","thisDay","perc","prevDayId","prevDayBlock","diff","prop","prevDayKey","define","amd","module","exports","_crossfilter","require","crossfilter$ma"],"mappings":"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"}